# 학습 2/n

## 2.5 퍼블릭 상수(Public Constant)를 사용하지 마세요

'상수(constant)'라고도 불리는 public static final 프로퍼티는 객체 사이에 데이터를 공유하기 위해 사용하는 매우 유명한 매커니즘입니다.

하지만 객체들은 어떤 것도 공유해서는 안됩니다. 대신 독립적이고 '닫혀 있어야 (closed)' 합니다.
간단하게 말해서 상수를 이용한 공유 메커니즘은 캡슐화와 객체지향적인 사고 전체를 부정하는 일입니다.

아래와 같은 Constants 클래스를 추가하고 여러 객체에서 Cnstatns.EOL을 사용하는 코드는 불행하게도 코드의 중복이라는 하나의 문제를 해결하기 위해 두 개의 더 큰 문제를 추가하고 있습니다.
첫번째는 결합도(coupling)이 높아진 것이며 두번째는 응집도(cohesion)가 낮아진 것입니다.

```java
public class Constants {
	public static final String EOL = "\r\n";
```

### 결합도 증가

Constants를 상수로 사용하는 클래스들은 모두 같은 객체를 의존하고 있으며, 이 의존성은 하드코딩 되어있습니다. 이 경우는 의존성을 쉽게 분리할 수 있는 방법이 없습니다. 그렇다면 만약 Constant.EOL 내용을 수정하게 된다면 이 상수를 사용하는 클래스들은 예상할 수 없는 방향으로 변경될 것입니다.
즉, 많은 객체들이 다른 객체를 사용하는 상황에서 서로를 어떻게 사용하는지 알 수 없다면, 이 객체들은 매우 강하게 결합되어 있는것입니다.

### 응집도 저하

퍼블릭 상수를 사용하면 객체의 응집도는 낮아지고 낮은 응집도는 객체가 자신의 문제를 해결하는데 덜 집중한다는 것을 의미합니다. 그때문에 객체는 아주 멍청한 상수 위에 자신만의 의미론을 덧붙여야 합니다. 결국 이 의미를 추가하기 위해서는 더 많은 코드를 작성해야할 것입니다.

### 대안

대안은 기능을 공유할 수 있도록 새로운 클래스를 만드는 것입니다. 그리고  데이터가 아니라 기능을 공유해야 한다는 것입니다.

```java
class EOLString {
	private final String origin;

	EOLString(String src) {
		this.origin = src;
	}

	@Override
	String toString() {
		return String.format("%s\r\n",origin);
	}
}
```

EOLString 클래스로 기능 공유를 통해 사용하는 클래스들의 EOLString에 대한 결합은 계약을통해 추가된 것이며, 계약에 의한 결합은 언제라도 분리가 가능하기 때문에 유지보수성을 저하시키지 않습니다.

### 결론

결론은 퍼블릭 상수마다 계약의 의미를 캡슐화하는 새로운 클래스를 만들어야 한다는 것이고 수백 개의 단순한 상수 문자열 리터럴 대신 수백 개의 마이크로 클래스를 만들어야한다는 의미입니다. 

OOP에서 퍼블릭 상수를 정대로 사용해서는 안되며 Java의 열거형에 대해서도 정확하게 동일한 규칙이 적용됩니다.
