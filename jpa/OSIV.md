# OSIV (OpenSessionInView)

![](./image/OSIV.png)
## OSIV 란
- OSIV는 클라이언트의 요청이 들어올 때 영속성 컨텍스트를 생성해서 요청이 끝날 때까지 같은 영속성 컨텍스트를 유지한다. 따라서 한 번 조회한 엔티티는 요청 이 끝날 때까지 영속 상태를 유지 한다.
- 엔티티 수정은 트랜잭션이 있는 계층에서만 동작한다. 트랜잭션이 없는 프레젠테이션 계층은 지연 로딩을 포함해서 조회만 할 수 있다.

### OSIV 장점
- 프리젠테이션 계층에서 엔티티가 준영속 상태가 되므로 지연 로딩 을 할 수 없다는 점을 해결한다.

### OSIV 단점
- OSIV를 사용하면 화면을 출력할 때 엔티티를 유지하면서 객채 그래프를 탐색할 수 있지만 복잡한 통계 화면 같은 경우 엔티티로 조회하기보다는 처음부터 통계 데이터를 구상하기 위한 JPQL을 작성해서 DTO로 조회하는 것이 효과적이다
- 데이터베이스의 커넥션을 오래 유지하기 때문에 성능이 저하된다.

## 참고  
- 자바 표준 ORM JPA 프로그래밍 (김영한)
