# 트랜잭션

## 트랜잭션이란?

---

데이터베이스 트랜잭션(Database Transaction)은 데이터베이스 관리 시스템 또는 유사한 시스템에서 상호작용의 단위이다.

## 트랜잭션의 성질

---

트랜잭션은 ACID라 하는 성질들을 통해 안전한 수행을 보장한다.

### 원자성(Atomicity)

트랜잭션 내에서 실행한 작업들은 마치 하나의 작업인 것처럼 모두 성공 하든가 모두 실패해야 한다.

### 일관성(Consistency)

모든 트랜잭션은 일관성 있는 데이터베이스 상태를 유지해야 한다. (데이터베이스 무결성 제약조건)

### 격리성(Isolation)

동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리한다. 
동시에 같은 데이터를 수정하지 못하도록 해야 하며 
동시성과 관련된 성능 이슈로 인해 격리 수준을 선택할 수 있다.

### 지속성(Durability)

트랜잭션을 성공적으로 마치면 그 결과가 항상 저장되어야 한다.
중간에 시스템에 문제가 발생해도 데이터베이스 로그 등을 사용해서 성공한 트랜잭션 내용을 복구해야 한다.

## 트랜잭션의 격리성과 격리수준

---

트랜잭션이 격리성을 완벽히 보장하려면 트랜잭션을 거의 차례대로 실행해야 하는데,
이렇게 처리하게 되면 동시성 처리 성능이 매우 나빠지므로 ANSI 표준은 트랜잭션의 격리수준을 4단계로 나누어 정의했다.

- READ UNCOMMITED(커밋되지 않은 읽기)
- READ COMMITTED(커밋된 읽기)
- REPEATABLE READ(반복 가능한 읽기)
- SERIALIZABLE(직렬화가능)

격리 수준이 낮은 순서대로 정렬 하였으며 READ UNCOMMITED의 가장 낮고 SERIALIZABLE의 격리 수준이 가장 높다. 격리 수준이 낮을 수록 동시성은 증가하지만 그에 따른 문제점들이 존재한다.

## 격리 수준에 따른 문제점

---

격리성으로 인해 나타날 수 있는 문제점은 일반적으로 Dirty Read, Non-Repeatable Read, Phantom Read 가 있다.

### Dirty Read

다른 트랜잭션에 의해 수정 되었지만 아직 커밋되지 않은 데이터를 읽는 것을 말한다.

### Non-Repeatable Read

한 트랜잭션 내에서 같은 Key를 가진 Row를 두 번 읽었는데 그 사이에 값이 변경되거나 삭제되어 결과가 다르게 나타나는 현상을 말한다.

### Phantom Read

한 트랜잭션 내에서 반복 조회 시 결과 집합이 달라지는 것을 말한다.

[트랜잭션 격리 수준과 문제점](https://www.notion.so/660a644ff1944b0e9ed6c85df3cbf6d3)
